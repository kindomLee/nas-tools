<div class="container-xl">
  <!-- Page title -->
  <div class="page-header d-print-none">
    <div class="row align-items-center">
      <div class="col">
        <h2 class="page-title">
          基礎設定
        </h2>
      </div>
    </div>
  </div>
</div>
<!-- 業務頁面程式碼 -->
<div class="page-body">
  <div class="container-xl">
    <div class="row row-cards">
      <div class="col-md-12">
        <div class="card" id="basic_system">
          <div class="card-header">
            <h3 class="card-title"><strong>系統</strong></h3>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">日誌輸出型別</label>
                  <select class="form-select" id="app.logtype">
                    <option value="console" {% if Config.app.logtype=='console' %}selected{% endif %}>控制檯</option>
                    <option value="file" {% if Config.app.logtype=='file' %}selected{% endif %}>檔案</option>
                    <option value="server" {% if Config.app.logtype=='server' %}selected{% endif %}>日誌中心</option>
                  </select>
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">日誌檔案路徑 <span class="form-help"
                                                               title="日誌輸出型別為檔案時需要配置該項"
                                                               data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.app.logpath or '' }}" class="form-control filetree-folders-only"
                         id="app.logpath" placeholder="/config/logs" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">日誌中心地址 <span class="form-help"
                                                               title="日誌輸出型別為日誌中心時需要配置該項；需要配置IP地址和埠，配置示例：127.0.0.1:514"
                                                               data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.app.logserver or '' }}" class="form-control" id="app.logserver"
                         placeholder="127.0.0.1:514" autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xl-2">
                <div class="mb-3">
                  <label class="form-label required">WEB桌布來源 <span class="form-help"
                                                               title="登入介面桌布來源：TMDB、Bing，設定為TMDB時需在媒體配置TMDB API Key"
                                                               data-bs-toggle="tooltip">?</span></label>
                  <select class="form-select" id="app.wallpaper">
                    <option value="themoviedb"
                      {% if not Config.app.wallpaper or Config.app.wallpaper=='themoviedb' %}selected{% endif %}>
                      TMDB
                    </option>
                    <option value="bing" {% if Config.app.wallpaper=='bing' %}selected{% endif %}>
                      Bing
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-xl-2">
                <div class="mb-3">
                  <label class="form-label required">WEB服務埠</label>
                  <input type="text" value="{{ Config.app.web_port or '' }}" class="form-control" id="app.web_port"
                         placeholder="3000" autocomplete="off">
                </div>
              </div>
              <div class="col-xl-4">
                <div class="mb-3">
                  <label class="form-label required">WEB管理使用者</label>
                  <input type="text" value="{{ Config.app.login_user or '' }}" class="form-control" id="app.login_user"
                         placeholder="admin" autocomplete="off">
                </div>
              </div>
              <div class="col-xl-4">
                <div class="mb-3">
                  <label class="form-label required">WEB管理密碼</label>
                  <input type="password" value="{{ Config.app.login_password or '' }}" class="form-control"
                         id="app.login_password" placeholder="password" autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">HTTPS證書檔案路徑 <span class="form-help" title="需要是pem格式的證書檔案"
                                                                    data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.app.ssl_cert or '' }}" class="form-control filetree-files-only"
                         id="app.ssl_cert" placeholder="" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">HTTPS證書金鑰檔案路徑</label>
                  <input type="text" value="{{ Config.app.ssl_key or '' }}" class="form-control filetree-files-only"
                         id="app.ssl_key" placeholder="" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">代理伺服器 <span class="form-help"
                                                             title="將使用代理訪伺服器訪問themoviedb、telegram、公開bt站等境外網站及程式更新(git)，站點預設不使用代理，如需使用需在站點維護中開啟；配置格式示例：127.0.0.1:7890（Http協議）、socks5://127.0.0.1:8018"
                                                             data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Proxy or '' }}" class="form-control" id="app.proxies"
                         placeholder="127.0.0.1:7890" autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <div class="mb-3">
                  <label class="form-label">外網訪問地址 <span class="form-help"
                                                               title="使用該地址進行通知點選跳轉以及設定Telegram機器人Webhook；需要配置IP地址和埠，如為https則需要加https://字首；如啟用Telegram機器人Webhook，則埠必須為：443, 80, 88, 8443之一，80、443一般運營商會封禁，建議使用88、8443"
                                                               data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.app.domain or '' }}" class="form-control" id="app.domain"
                         placeholder="http://IP:PORT" autocomplete="off">
                </div>
              </div>
              <div class="col-lg-8">
                <div class="mb-3">
                  <label class="form-label">User-Agent <span class="form-help"
                                                             title="如發現被豆瓣、PT站等封堵，請適當修改此項"
                                                             data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.app.user_agent or '' }}" class="form-control" id="app.user_agent"
                         placeholder="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36"
                         autocomplete="off">
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row align-items-center">
              <div class="col"></div>
              <div class="col-auto">
                <a id="basic_system_btn" href="javascript:save_basic_config('basic_system')" class="btn btn-primary">
                  儲存
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card" id="basic_media">
          <div class="card-header">
            <h3 class="card-title"><strong>媒體</strong></h3>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">TMDB API Key <span class="form-help"
                                                                        title="在themoviedb.org網站申請API Key，該項必須配置，否則所有功能無法正常執行"
                                                                        data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.app.rmt_tmdbkey or '' }}" class="form-control"
                         id="app.rmt_tmdbkey" placeholder="" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">TMDB域名 <span class="form-help"
                                                                    title="如api.themoviedb.org無法訪問可償試使用api.tmdb.org，如均無法訪問，則需要修改host或者使用網路代理"
                                                                    data-bs-toggle="tooltip">?</span></label>
                  <select class="form-select" id="app.tmdb_domain">
                    <option value="api.themoviedb.org" {% if not Config.app.tmdb_domain or
                      Config.app.tmdb_domain=='api.themoviedb.org' %}selected{% endif %}>api.themoviedb.org
                    </option>
                    <option value="api.tmdb.org" {% if Config.app.tmdb_domain=='api.tmdb.org' %}selected{% endif %}>
                      api.tmdb.org
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">TMDB匹配模式 <span class="form-help"
                                                                        title="正常模式下會提升識別成功率，但也可能會導致誤識別率增加；嚴格模式可以降低誤識別率，但可能導致很多檔名/種子名中年份不正確的無法被識別（特別是劇集，需要是首播年份）"
                                                                        data-bs-toggle="tooltip">?</span></label>
                  <select class="form-select" id="app.rmt_match_mode">
                    <option value="normal" {% if Config.app.rmt_match_mode=='normal' %}selected{% endif %}>正常模式
                    </option>
                    <option value="strict" {% if Config.app.rmt_match_mode=='strict' %}selected{% endif %}>嚴格模式
                    </option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">二級分類策略 <span class="form-help"
                                                               title="電影/電視劇/動漫是否需要二級分類，啟用二級分類後會在電影/電視劇/動漫目錄下按二級分類名建立子目錄；此處配置分類的策略名，配置檔案目錄中需要有與策略名同名的.yaml配置檔案，預設策略default-category分類設定可參考default-category.yaml；如不需要啟動分類，則該項配置為空"
                                                               data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.media.category or '' }}" class="form-control" id="media.category"
                         placeholder="default-category" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">預設檔案轉移方式 <span class="form-help"
                                                                            title="預設使用的檔案轉移方式；硬連結模式要求源目錄和目的目錄或媒體庫目錄在一個磁碟分割槽或者儲存空間/共享資料夾，Docker執行時需要直接對映源目錄和目的目錄或媒體庫目錄的上級目錄，否則docker仍然會認為是跨盤；移動模式會直接移動原檔案，會影響做種，請謹慎使用；RCLONE針對網盤場景，需要自行對映rclone配置目錄到容器中（/root/.config/rclone）或在容器內使用rclone config完成rclone配置，網盤配置名稱必須為：NASTOOL;minio針對S3/雲原生場景，需要自行在容器內使用mc alias set NASTOOL http://your_domain_name_or_ip:port ACCESS_KEY SECRET_KEY完成minio配置(alias的名稱必須為NASTOOL)，並在minio控制檯增加一個名為data的bucket(名稱必須為data)"
                                                                            data-bs-toggle="tooltip">?</span></label>
                  <select class="form-select" id="pt.rmt_mode">
                    <option value="link" {% if Config.pt.rmt_mode=='link' %}selected{% endif %}>硬連結</option>
                    <option value="softlink" {% if Config.pt.rmt_mode=='softlink' %}selected{% endif %}>軟連結</option>
                    <option value="copy" {% if Config.pt.rmt_mode=='copy' %}selected{% endif %}>複製</option>
                    <option value="move" {% if Config.pt.rmt_mode=='move' %}selected{% endif %}>移動</option>
                    <option value="rclonecopy" {% if Config.pt.rmt_mode=='rclonecopy' %}selected{% endif %}>Rclone複製
                    </option>
                    <option value="rclone" {% if Config.pt.rmt_mode=='rclone' %}selected{% endif %}>Rclone移動</option>
                    <option value="miniocopy" {% if Config.pt.rmt_mode=='miniocopy' %}selected{% endif %}>Minio複製
                    </option>
                    <option value="minio" {% if Config.pt.rmt_mode=='minio' %}selected{% endif %}>Minio移動</option>
                  </select>
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">轉移最小檔案大小(MB) <span class="form-help"
                                                                                title="小於該大小的檔案將會忽略，不進行轉移重新命名"
                                                                                data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.media.min_filesize or '' }}" class="form-control"
                         id="media.min_filesize" placeholder="200" autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">轉移資料夾黑名單 <span class="form-help"
                                                                   title="檔案所在上級資料夾名稱在黑名單中的，忽略轉移"
                                                                   data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.media.ignored_paths or '' }}" class="form-control"
                         id="media.ignored_paths" placeholder="使用;分隔" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label">檔案轉移忽略詞 <span class="form-help"
                                                                 title="檔名（包括副檔名）包含忽略詞的，忽略轉移，支援正規表示式，注意特殊字元轉義"
                                                                 data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.media.ignored_files or '' }}" class="form-control"
                         id="media.ignored_files" placeholder="支援正規表示式，使用;分隔" autocomplete="off">
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-label required">下載優先規則 <span class="form-help"
                                                                        title="訂閱及遠端搜尋下載將按此優先規則選擇下載資源，其中站點優先決定於維護的站點優先順序或索引器中配置的站點順序，預設為站點優先"
                                                                        data-bs-toggle="tooltip">?</span></label>
                  <select class="form-select" id="pt.download_order">
                    <option value="" {% if not Config.pt.download_order %}selected{% endif %}>預設</option>
                    <option value="site" {% if Config.pt.download_order=='site' %}selected{% endif %}>站點優先</option>
                    <option value="seeder" {% if Config.pt.download_order=='seeder' %}selected{% endif %}>做種數優先
                    </option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="mb-3">
                  <label class="form-label required">電影重新命名格式 <span class="form-help"
                                                                          title="程式會按定義的命名格式對電影進行重新命名；/代表上下級目錄，{}內為佔位符，轉義為&#123;&#123;&#125;&#125;；佔位符會使用檔案識別出來的實際值替換；佔位符外的字元會當成普通字元，直接體現在名稱上。<br>電影占位符：<br>{title}：標題<br>{en_title}：英文標題<br>{original_title}：原語種標題<br>{original_name}：原檔名<br>{year}：年份<br>{edition}：版本(Bluray/WEB-DL等)<br>{videoFormat}：解析度(1080p/4k等)<br>{videoCodec}：影片編碼<br>{audioCodec}：音訊編碼及聲道<br>{tmdbid}：TMDB的ID<br>{part}：part1/disc1/dvd1<br>{releaseGroup}：製作組/字幕組<br>{name}：識別名稱（檔名中識別出的名稱，可用自定義識別詞替換）<br><br>重新命名使用Python的format格式化，可進行指定格式輸出"
                                                                          data-bs-toggle="tooltip"
                                                                          data-bs-html="true">?</span></label>
                  <input type="text" value="{{ Config.media.movie_name_format or '' }}" class="form-control"
                         id="media.movie_name_format"
                         placeholder="{title} ({year})/{title}-{part} ({year}) - {videoFormat}"
                         autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="mb-3">
                  <label class="form-label required">電視劇重新命名格式 <span class="form-help"
                                                                            title="程式會按定義的命名格式對電視劇進行重新命名；/代表上下級目錄，{}內為佔位符，轉義為&#123;&#123;&#125;&#125;；佔位符會使用檔案識別出來的實際值替換，佔位符外的字元會當成普通字元，直接體現在名稱上。<br>電視劇佔位符：<br>{title}：標題<br>{en_title}：英文標題<br>{original_title}：原語種標題<br>{original_name}：原檔名<br>{year}：年份<br>{edition}：版本(Bluray/WEB-DL等)<br>{videoFormat}：解析度(1080p/4k等)<br>{videoCodec}：影片編碼<br>{audioCodec}：音訊編碼及聲道<br>{tmdbid}：TMDB的ID<br>{season}：季數<br>{episode}：集數<br>{season_episode}：劇集SxxExx<br>{part}：part1/disc1/dvd1<br>{releaseGroup}：製作組/字幕組<br>{name}：識別名稱（檔名中識別出的名稱，可用自定義識別詞替換）<br><br>重新命名使用Python的format格式化，可進行指定格式輸出"
                                                                            data-bs-toggle="tooltip"
                                                                            data-bs-html="true">?</span></label>
                  <input type="text" value="{{ Config.media.tv_name_format or '' }}" class="form-control"
                         id="media.tv_name_format"
                         placeholder="{title} ({year})/Season {season}/{title}-{part} - {season_episode} - 第 {episode} 集"
                         autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="media.filesize_cover" {% if
                      Config.media.filesize_cover %}checked{% endif %}>
                    <span class="form-check-label">高質量檔案覆蓋 <span class="form-help"
                                                                        title="開啟後，如下載了更高質量的同名檔案時，會覆蓋媒體庫中已有的檔案，否則不會進行轉移處理"
                                                                        data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="media.refresh_mediaserver" {% if
                      Config.media.refresh_mediaserver %}checked{% endif %}>
                    <span class="form-check-label">實時重新整理媒體庫 <span class="form-help"
                                                                        title="開啟後，檔案轉移完成時會實時重新整理媒體伺服器（Emby/Jellyfin/Plex）的媒體庫"
                                                                        data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-lg">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="media.nfo_poster"
                           {% if Config.media.nfo_poster %}checked{% endif %}>
                    <span class="form-check-label">刮削後設資料及圖片 <span class="form-help"
                                                                          title="開啟後會自動生成nfo描述檔案及圖片，協助媒體伺服器識別和刮削，在刮削設定中自定義刮削內容"
                                                                          data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row align-items-center">
              <div class="col-auto">
                <a href="javascript:void(0)" class="btn d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-scraper">
                  刮削設定
                </a>
                <a href="javascript:void(0)" class="btn d-sm-none btn-icon" data-bs-toggle="modal" data-bs-target="#modal-scraper" title="刮削設定">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-slideshow" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                     <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                     <line x1="15" y1="6" x2="15.01" y2="6"></line>
                     <rect x="3" y="3" width="18" height="14" rx="3"></rect>
                     <path d="M3 13l4 -4a3 5 0 0 1 3 0l4 4"></path>
                     <path d="M13 12l2 -2a3 5 0 0 1 3 0l3 3"></path>
                     <line x1="8" y1="21" x2="8.01" y2="21"></line>
                     <line x1="12" y1="21" x2="12.01" y2="21"></line>
                     <line x1="16" y1="21" x2="16.01" y2="21"></line>
                  </svg>
                </a>
                <a href="javascript:void(0)" class="btn d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-release-groups">
                  自定義製作組/字幕組
                </a>
                <a href="javascript:void(0)" class="btn d-sm-none btn-icon" data-bs-toggle="modal" data-bs-target="#modal-release-groups" title="自定義製作組/字幕組">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tex" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                     <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                     <path d="M9 8v-1h-6v1"></path>
                     <path d="M6 15v-8"></path>
                     <path d="M21 15l-5 -8"></path>
                     <path d="M16 15l5 -8"></path>
                     <path d="M14 11h-4v8h4"></path>
                     <path d="M10 15h3"></path>
                  </svg>
                </a>
              </div>
              <div class="col"></div>
              <div class="col-auto">
                <a id="basic_media_btn" href="javascript:save_basic_config('basic_media')" class="btn btn-primary">
                  儲存
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card" id="basic_service">
          <div class="card-header">
            <h3 class="card-title"><strong>服務</strong></h3>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-label">站點簽到時間 <span class="form-help"
                                                               title="站點自動簽到時間，三種配置方法：1、配置間隔，單位小時，比如23.5；2、配置固定時間，如08:00；3、配置時間範圍，如08:00-09:00，表示在該時間範圍內隨機執行一次；配置為空則不啟用自動站點簽到功能（有的站點不支援簽到，僅登入一次網站保號）"
                                                               data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.pt.ptsignin_cron or '' }}" class="form-control"
                         id="pt.ptsignin_cron" placeholder="留空關閉自動簽到" autocomplete="off">
                </div>
              </div>
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-label">訂閱RSS週期(秒) <span class="form-help"
                                                                  title="RSS訂閱重新整理的時間間隔，需要在訂閱管理中設定訂閱站點；如配置為空則不啟動RSS訂閱功能"
                                                                  data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.pt.pt_check_interval or '' }}" class="form-control"
                         id="pt.pt_check_interval" placeholder="留空關閉RSS訂閱" autocomplete="off">
                </div>
              </div>
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-label">訂閱搜尋週期(天) <span class="form-help"
                                                                   title="定時對訂閱內容進行存量資源搜尋，以天為單位，最小間隔為1天，該項會對站點造成搜尋壓力，如非必要請不要開啟"
                                                                   data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.pt.search_rss_interval or '' }}" class="form-control"
                         id="pt.search_rss_interval" placeholder="留空關閉訂閱定時搜尋" autocomplete="off">
                </div>
              </div>
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-label">媒體庫同步週期(小時) <span class="form-help"
                                                                       title="定時同步媒體伺服器資料到本地，用於展示媒體是否存在，留空則不啟用同步服務"
                                                                       data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.media.mediasync_interval or '' }}" class="form-control"
                         id="media.mediasync_interval" placeholder="留空關閉媒體庫同步" autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="pt.pt_monitor"
                           {% if Config.pt.pt_monitor %}checked{% endif %}>
                    <span class="form-check-label">下載軟體監控 <span class="form-help"
                                                                      title="監控下載軟體，下載完成後自動進行檔案轉移，與目錄同步監控下載目錄二選一開啟"
                                                                      data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="pt.pt_monitor_only" {% if
                      Config.pt.pt_monitor_only %}checked{% endif %}>
                    <span class="form-check-label">只管理NAStool新增的下載 <span class="form-help"
                                                                                 title="啟用後只有含NASTOOL標籤的下載任務才會被自動轉移和顯示，關閉則下載軟體中所有的任務都會轉移和顯示；僅支援Qbittorrent、Transmission下載器"
                                                                                 data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="pt.search_auto"
                           {% if Config.pt.search_auto %}checked{% endif %}>
                    <span class="form-check-label">遠端搜尋自動擇優下載 <span class="form-help"
                                                                              title="啟用後在微信、Telegram傳送名稱後會自動擇優下載，否則需要點選連結跳轉後手工選擇"
                                                                              data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-xl">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="pt.search_no_result_rss" {% if
                      Config.pt.search_no_result_rss %}checked{% endif %}>
                    <span class="form-check-label">遠端下載不完整自動訂閱 <span class="form-help"
                                                                                title="啟用後在微信、Telegram傳送名稱搜尋下載不完整時將自動新增訂閱"
                                                                                data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row align-items-center">
              <div class="col"></div>
              <div class="col-auto">
                <a id="basic_service_btn" href="javascript:save_basic_config('basic_service')" class="btn btn-primary">
                  儲存
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card" id="security">
          <div class="card-header">
            <h3 class="card-title"><strong>安全</strong></h3>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-12 col-lg">
                <div class="mb-1">
                  <label class="form-label">媒體伺服器Webhook源地址 <span class="form-help"
                                                                          title="僅允許配置的地址範圍內地址呼叫Webhook，多個地址段用,號分隔，預設為0.0.0.0/0,::/0即不做限制"
                                                                          data-bs-toggle="tooltip">?</span></label>
                  <input type="text" value="{{ Config.security.media_server_webhook_allow_ip.ipv4 or '' }}"
                         class="form-control" id="security.media_server_webhook_allow_ip.ipv4"
                         placeholder="允許的IPv4 CIDR"
                         autocomplete="off">
                </div>
                <div class="mb-3">
                  <input type="text" value="{{ Config.security.media_server_webhook_allow_ip.ipv6 or '' }}"
                         class="form-control" id="security.media_server_webhook_allow_ip.ipv6"
                         placeholder="允許的IPv6 CIDR"
                         autocomplete="off">
                </div>
              </div>
              <div class="col-12 col-lg">
                <div class="mb-1">
                  <label class="form-label">Telegram源地址 <span class="form-help"
                                                                 title="僅接收配置的地址範圍內傳送的Telegram訊息，多個地址段用,號分隔，配置為0.0.0.0/0,::/0則不做限制；使用Telegram WebHook且未做代理轉發時推薦IPv4地址設定為：149.154.160.0/20,91.108.4.0/22，關閉Telegram WebHook時推薦IPv4地址設定為：127.0.0.1"
                                                                 data-bs-toggle="tooltip">?</span></label>
                  <input type="text"
                         value="{% if Config.security.telegram_webhook_allow_ip %}{{ Config.security.telegram_webhook_allow_ip.ipv4 or '' }}{% endif %}"
                         class="form-control" id="security.telegram_webhook_allow_ip.ipv4" placeholder="允許的IPv4 CIDR"
                         autocomplete="off">
                </div>
                <div class="mb-3">
                  <input type="text"
                         value="{% if Config.security.telegram_webhook_allow_ip %}{{ Config.security.telegram_webhook_allow_ip.ipv6 or '' }}{% endif %}"
                         class="form-control" id="security.telegram_webhook_allow_ip.ipv6" placeholder="允許的IPv6 CIDR"
                         autocomplete="off">
                </div>
              </div>
              <div class="col-12 col-lg">
                <div class="mb-3">
                  <label class="form-label">API金鑰 <span class="form-help"
                                                          title="使用Jellyseerr、Overseerr等呼叫本程式訂閱介面時，需要在Authorization中填入該金鑰"
                                                          data-bs-toggle="tooltip">?</span></label>
                  <input type="text" id="security.api_key" class="form-control"
                         value="{% if Config.security %}{{ Config.security.api_key }}{% endif %}">
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row align-items-center">
              <div class="col"></div>
              <div class="col-auto">
                <a id="security_btn" href="javascript:save_basic_config('security')" class="btn btn-primary">
                  儲存
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card" id="laboratory">
          <div class="card-header">
            <h3 class="card-title"><strong>實驗室</strong></h3>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-12 col-xl-3">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="laboratory.search_keyword" {% if
                      Config.laboratory and Config.laboratory.search_keyword %}checked{% endif %}>
                    <span class="form-check-label">輔助識別 <span class="form-help"
                                                                  title="開啟後，無法識別到媒體資訊時會嘗試猜測和糾正關鍵詞並再次匹配，會大大增加識別耗時，一般情況下不建議開啟"
                                                                  data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-12 col-xl-3">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="laboratory.search_tmdbweb" {% if
                      Config.laboratory and Config.laboratory.search_tmdbweb %}checked{% endif %}>
                    <span class="form-check-label">增強識別 <span class="form-help"
                                                                  title="開啟後，透過TMDB的API無法識別到媒體資訊時，會嘗試透過themoviedb.org網站再次搜尋匹配，僅個別極端情況下有效，會大大增加識別耗時，一般情況下不建議開啟"
                                                                  data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-12 col-xl-3">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="laboratory.tmdb_cache_expire" {% if
                      Config.laboratory and Config.laboratory.tmdb_cache_expire %}checked{% endif %}>
                    <span class="form-check-label">TMDB快取過期策略 <span class="form-help"
                                                                          title="開啟TMDB快取過期策略後，預設7天過期，過期快取將被刪除,  7天內訪問過期時間可以被重新整理，建議開啟"
                                                                          data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-12 col-xl-3">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="laboratory.use_douban_titles" {% if
                      Config.laboratory and Config.laboratory.use_douban_titles %}checked{% endif %}>
                    <span class="form-check-label">使用豆瓣名稱聯想 <span class="form-help"
                                                                          title="開啟將使用豆瓣進行電影電視劇的名稱聯想，允許中文名不完整時自動聯想，但如豆瓣資料與TMDB不一致時可能會無法搜尋；關閉後使用TMDB的資料，對中文支援不友好，但不會有無法搜尋的問題"
                                                                          data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-12 col-xl-3">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="laboratory.search_en_title" {% if
                      Config.laboratory and Config.laboratory.search_en_title %}checked{% endif %}>
                    <span class="form-check-label">搜尋優先使用英文名 <span class="form-help"
                                                                            title="開啟後對於精確搜尋場景將會優先使用英文名搜尋，否則優先使用中文名搜尋"
                                                                            data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
              <div class="col-12 col-xl-3">
                <div class="mb-3">
                  <label class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="laboratory.tmdb_proxy" {% if Config.laboratory
                      and Config.laboratory.tmdb_proxy %}checked{% endif %}>
                    <span class="form-check-label">使用TMDB代理服務 <span class="form-help"
                                                                          title="使用內建的TMDB代理伺服器轉發媒體識別請求，網路無法連線TMDB時可選擇開啟"
                                                                          data-bs-toggle="tooltip">?</span></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row align-items-center">
              <div class="col"></div>
              <div class="col-auto">
                <a id="laboratory_btn" href="javascript:save_basic_config('laboratory')" class="btn btn-primary">
                  儲存
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal modal-blur fade" id="modal-scraper" tabindex="-1" role="dialog" aria-hidden="true"
     data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="card modal-content" style="border-top-left-radius:var(--tblr-modal-inner-border-radius) !important; border-top-right-radius:var(--tblr-modal-inner-border-radius) !important">
      <div class="card-header" style="border-top-left-radius:var(--tblr-modal-inner-border-radius) !important; border-top-right-radius:var(--tblr-modal-inner-border-radius) !important">
        <ul class="nav nav-fill card-header-tabs nav-tabs rounded-3" data-bs-toggle="tabs"
            role="tablist">
          <li class="nav-item" role="presentation">
            <a href="#tabs-scraper-nfo" class="nav-link active" style="justify-content: center" data-bs-toggle="tab"
               aria-selected="true" role="tab">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-info-square-rounded me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                 <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                 <path d="M12 8h.01"></path>
                 <path d="M11 12h1v4h1"></path>
                 <path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"></path>
              </svg>
              後設資料
            </a>
          </li>
          <li class="nav-item" role="presentation">
            <a href="#tabs-scraper-pic" class="nav-link" style="justify-content: center" data-bs-toggle="tab"
               aria-selected="false" role="tab" tabindex="-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-photo me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                 <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                 <line x1="15" y1="8" x2="15.01" y2="8"></line>
                 <rect x="4" y="4" width="16" height="16" rx="3"></rect>
                 <path d="M4 15l4 -4a3 5 0 0 1 3 0l5 5"></path>
                 <path d="M14 14l1 -1a3 5 0 0 1 3 0l2 2"></path>
              </svg>
              圖片
            </a>
          </li>
        </ul>
      </div>
      <div class="card-body">
        <div class="tab-content">
          <div class="tab-pane fade active show" id="tabs-scraper-nfo" role="tabpanel">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label class="form-label">電影 </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.movie.basic" {% if
                        Config.scraper_nfo and Config.scraper_nfo.movie.basic %}checked{% endif %}>
                      <span class="form-check-label">基礎資訊 </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.movie.credits" {% if
                        Config.scraper_nfo and Config.scraper_nfo.movie.credits %}checked{% endif %}>
                      <span class="form-check-label">演職人員 </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.movie.credits_chinese" {% if
                        Config.scraper_nfo and Config.scraper_nfo.movie.credits_chinese %}checked{% endif %}>
                      <span class="form-check-label">演職人員中文 </span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label class="form-label">電視劇 </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.tv.basic" {% if
                        Config.scraper_nfo and Config.scraper_nfo.tv.basic %}checked{% endif %}>
                      <span class="form-check-label">基礎資訊 </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.tv.credits" {% if
                        Config.scraper_nfo and Config.scraper_nfo.tv.credits %}checked{% endif %}>
                      <span class="form-check-label">演職人員 </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.tv.credits_chinese" {% if
                        Config.scraper_nfo and Config.scraper_nfo.tv.credits_chinese %}checked{% endif %}>
                      <span class="form-check-label">演職人員中文 </span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label class="form-label">電視劇-季-集 </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.tv.season_basic" {% if
                        Config.scraper_nfo and Config.scraper_nfo.tv.season_basic %}checked{% endif %}>
                      <span class="form-check-label">季-基礎資訊 </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.tv.episode_basic" {% if
                        Config.scraper_nfo and Config.scraper_nfo.tv.episode_basic %}checked{% endif %}>
                      <span class="form-check-label">集-基礎資訊 </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-4">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_nfo.tv.episode_credits" {% if
                        Config.scraper_nfo and Config.scraper_nfo.tv.episode_credits %}checked{% endif %}>
                      <span class="form-check-label">集-演職人員 </span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="tabs-scraper-pic" role="tabpanel">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label class="form-label">電影圖片 </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.poster" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.poster %}checked{% endif %}>
                      <span class="form-check-label">poster </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.backdrop" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.backdrop %}checked{% endif %}>
                      <span class="form-check-label">fanart </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.background" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.background %}checked{% endif %}>
                      <span class="form-check-label">background </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.logo" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.logo %}checked{% endif %}>
                      <span class="form-check-label">logo </span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.disc" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.disc %}checked{% endif %}>
                      <span class="form-check-label">disc </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.banner" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.banner %}checked{% endif %}>
                      <span class="form-check-label">banner </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.movie.thumb" {% if
                        Config.scraper_pic and Config.scraper_pic.movie.thumb %}checked{% endif %}>
                      <span class="form-check-label">thumb </span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label class="form-label">電視劇圖片 </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.poster" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.poster %}checked{% endif %}>
                      <span class="form-check-label">poster </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.backdrop" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.backdrop %}checked{% endif %}>
                      <span class="form-check-label">fanart </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.background" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.background %}checked{% endif %}>
                      <span class="form-check-label">show </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.logo" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.logo %}checked{% endif %}>
                      <span class="form-check-label">logo </span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.clearart" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.clearart %}checked{% endif %}>
                      <span class="form-check-label">clearart </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.banner" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.banner %}checked{% endif %}>
                      <span class="form-check-label">banner </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.thumb" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.thumb %}checked{% endif %}>
                      <span class="form-check-label">thumb </span>
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="mb-3">
                    <label class="form-label">電視劇-季圖片 </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.season_poster" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.season_poster %}checked{% endif %}>
                      <span class="form-check-label">poster </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.season_banner" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.season_banner %}checked{% endif %}>
                      <span class="form-check-label">banner </span>
                    </label>
                  </div>
                </div>
                <div class="col-12 col-lg-3">
                  <div class="mb-3">
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" id="scraper_pic.tv.season_thumb" {% if
                        Config.scraper_pic and Config.scraper_pic.tv.season_thumb %}checked{% endif %}>
                      <span class="form-check-label">thumb </span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-link" data-bs-dismiss="modal">取消</button>
        <a id="scraper_save_btn" href="javascript:save_scraper_config()" class="btn btn-primary ms-auto">
          儲存
        </a>
      </div>
    </div>
  </div>
</div>
<div class="modal modal-blur fade" id="modal-release-groups" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">自定義製作組/字幕組 <span class="form-help" title="無法識別的製作組/字幕組在此新增" data-bs-toggle="tooltip">?</span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class='row'>
          <div class="col-lg-12">
            <div class="mb-3">
              <textarea class="form-control" id="release_groups" rows="5" placeholder="多個製作組/字幕組請用;分隔，支援正規表示式，特殊字元注意轉義">{{ Config.laboratory.release_groups or '' }}</textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-link me-auto" data-bs-dismiss="modal">取消</button>
        <a id="release_groups_save_btn" href="javascript:save_release_groups_config()" class="btn btn-primary">
          儲存
        </a>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  // 儲存基礎設定
  function save_basic_config(type) {
    let params = {};
    $("#" + type + " input").each(function () {
      let value;
      const key = $(this).attr("id");
      if ($(this).attr("type") === "checkbox") {
        value = !!$(this).prop("checked");
      } else {
        value = $(this).val();
      }
      params[key] = value;
    });
    $("#" + type + " select").each(function () {
      const key = $(this).attr("id");
      params[key] = $(this).val();
    });
    if (type !== "modal-scraper") {
      $("#" + type + "_btn").text("儲存中...").attr("disabled", true);
    }
    ajax_post("update_config", params, function (ret) {
      if (type !== "modal-scraper") {
        $("#" + type + "_btn").text("儲存").attr("disabled", false);
      }
    });
  }

  // 儲存搜刮配置
  function save_scraper_config() {
    save_basic_config('modal-scraper');
    $("#modal-scraper").modal("hide");
  }

    // 儲存自定義製作組/字幕組配置
  function save_release_groups_config(){
    let params = {};
    params['laboratory.release_groups'] = $("#release_groups").val().replace(/;$/g, '');
    $("#release_groups_save_btn").text("儲存中...").attr("disabled", true);
    ajax_post("update_config", params, function (ret) {
      $("#release_groups_save_btn").text("儲存").attr("disabled", false);
    });
    $("#modal-customized-words").modal("hide");
  }

</script>